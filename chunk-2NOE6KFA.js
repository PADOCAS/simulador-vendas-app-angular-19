import{a as tt}from"./chunk-NLY2HDLN.js";import{a as et}from"./chunk-BSF5BN66.js";import{$ as k,A as L,B as Q,D as $,F as q,G as z,H as j,N as B,O as E,P as b,Q as F,R as y,S as N,T as O,U as A,V as G,W as J,X as K,Y as U,Z as W,_ as X,h as H,la as Y,ma as Z,y as P}from"./chunk-7OGIKOKS.js";import{Hb as o,Ib as n,Jb as c,Kb as p,Lb as u,Nb as h,Qb as w,Sb as T,Wb as S,Xb as v,Yb as x,ac as m,bb as d,bc as M,cb as g,d as D,ec as I,na as f,nb as V,oa as _,s as R,sb as s,yb as C}from"./chunk-CNIQ24GW.js";var it=()=>[5,10,20];function at(e,a){e&1&&(o(0,"th",14),m(1,"Id"),n())}function ot(e,a){if(e&1&&(o(0,"td",15),m(1),n()),e&2){let t=a.$implicit;d(),M(t.id)}}function nt(e,a){e&1&&(o(0,"th",14),m(1,"Nome"),n())}function rt(e,a){if(e&1&&(o(0,"td",15),m(1),n()),e&2){let t=a.$implicit;d(),M(t.nome)}}function lt(e,a){e&1&&(o(0,"th",14),m(1,"Descri\xE7\xE3o"),n())}function mt(e,a){if(e&1&&(o(0,"td",15),m(1),n()),e&2){let t=a.$implicit;d(),M(t.descricao)}}function dt(e,a){e&1&&c(0,"th",14)}function st(e,a){if(e&1){let t=h();o(0,"td",15)(1,"button",16),w("click",function(){let i=f(t).$implicit,l=T();return _(l.onClickEditar(i))}),o(2,"mat-icon"),m(3,"edit"),n()()()}}function ct(e,a){e&1&&c(0,"th",14)}function pt(e,a){if(e&1){let t=h();o(0,"td",15)(1,"button",17),w("click",function(){let i=f(t).$implicit,l=T();return _(l.onClickDeletar(i))}),o(2,"mat-icon"),m(3,"delete"),n()()()}}function ut(e,a){e&1&&c(0,"tr",18)}function Ct(e,a){e&1&&c(0,"tr",19)}var Ht=(()=>{class e{constructor(t,r,i){this.categoriaService=t,this.produtosService=r,this.router=i,this.dataSource=new k,this.showLoading=!1,this.displayedColumns=["id","nome","descricao","editar","excluir"]}ngAfterViewInit(){this.loadCategorias()}loadCategorias(){return D(this,null,function*(){this.showLoading=!0;let t=yield R(this.categoriaService.getCategorias());this.dataSource=new k(t),this.table.dataSource=this.dataSource,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.showLoading=!1})}navegarParaCadCategoria(){this.router.navigate(["/cad-categoria"])}onClickEditar(t){console.log("Editando Categoria: ",t),t!=null&&t.id!==void 0&&t.id!==null&&this.router.navigate(["/cad-categoria-edit",t.id])}onClickDeletar(t){return D(this,null,function*(){console.log("Excluindo Categoria: ",t),t!=null&&t.id!==void 0&&t.id!==null&&confirm(`Deletar Categoria (${t.id}) ${t.nome} ?`)&&(this.showLoading=!0,(yield this.produtosService.existsProdutoComCategoria(t))?(alert("N\xE3o \xE9 poss\xEDvel excluir uma categoria que possui produtos cadastrados."),this.showLoading=!1):this.categoriaService.deletar(t.id).subscribe(r=>{this.showLoading=!1,this.loadCategorias()}))})}static{this.\u0275fac=function(r){return new(r||e)(g(tt),g(et),g(H))}}static{this.\u0275cmp=V({type:e,selectors:[["app-categorias"]],viewQuery:function(r,i){if(r&1&&(S(E,5),S(b,5),S(y,5)),r&2){let l;v(l=x())&&(i.paginator=l.first),v(l=x())&&(i.sort=l.first),v(l=x())&&(i.table=l.first)}},decls:29,vars:8,consts:[["Paginator",""],["mat-raised-button","",3,"click"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","descricao"],["matColumnDef","editar"],["matColumnDef","excluir"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Selecione a P\xE1gina",3,"length","pageIndex","pageSize","pageSizeOptions"],[3,"visible"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-button","","matTooltip","Editar",3,"click"],["mat-button","","matTooltip","Excluir",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,i){if(r&1){let l=h();o(0,"mat-card")(1,"mat-card-actions")(2,"button",1),w("click",function(){return f(l),_(i.navegarParaCadCategoria())}),m(3,"Nova Categoria"),n()(),o(4,"mat-card-header")(5,"mat-card-title"),m(6,"Categorias"),n()(),o(7,"mat-card-content")(8,"table",2),p(9,3),s(10,at,2,0,"th",4)(11,ot,2,1,"td",5),u(),p(12,6),s(13,nt,2,0,"th",4)(14,rt,2,1,"td",5),u(),p(15,7),s(16,lt,2,0,"th",4)(17,mt,2,1,"td",5),u(),p(18,8),s(19,dt,1,0,"th",4)(20,st,4,0,"td",5),u(),p(21,9),s(22,ct,1,0,"th",4)(23,pt,4,0,"td",5),u(),s(24,ut,1,0,"tr",10)(25,Ct,1,0,"tr",11),n(),c(26,"mat-paginator",12,0),n(),c(28,"app-loading-bar",13),n()}r&2&&(d(24),C("matHeaderRowDef",i.displayedColumns),d(),C("matRowDefColumns",i.displayedColumns),d(),C("length",i.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",I(7,it)),d(2),C("visible",i.showLoading))},dependencies:[Y,y,O,K,A,N,U,G,J,W,X,E,b,F,P,j,L,q,$,z,Q,B,Z],styles:[".full-width-table[_ngcontent-%COMP%]{width:100%}"]})}}return e})();export{Ht as CategoriasComponent};
