import{a as Q}from"./chunk-Q5O3DEIF.js";import{b,d as x,f as K}from"./chunk-EOV7HJLD.js";import{A as B,C as R,E as V,F as j,G as O,H as P,da as H,f as N,g as p,h as I,i as M,j as T,ja as J,l as y,m as A,n as D,p as z,q as L,u as q,w as k,x as G,z as w}from"./chunk-BDPFLN4K.js";import{Ab as d,Fb as s,Ic as _,Jb as t,Kb as e,Lb as m,Sb as E,bb as l,cb as C,cc as o,d as F,nb as g,s as S,sb as u}from"./chunk-VAOQOUOU.js";function U(r,c){r&1&&(t(0,"div")(1,"mat-form-field",17)(2,"mat-label"),o(3,"Id"),e(),m(4,"input",18),e()())}function W(r,c){r&1&&(t(0,"mat-error"),o(1,"Raz\xE3o Social \xE9 "),t(2,"strong"),o(3,"requerida"),e()())}function X(r,c){r&1&&(t(0,"mat-error"),o(1,"Raz\xE3o Social deve ter no m\xEDnimo 3 caracteres"),e())}function Y(r,c){r&1&&(t(0,"mat-error"),o(1,"Nome Fantasia \xE9 "),t(2,"strong"),o(3,"requerida"),e()())}function Z(r,c){r&1&&(t(0,"mat-error"),o(1,"Nome Fantasia deve ter no m\xEDnimo 3 caracteres"),e())}function $(r,c){r&1&&(t(0,"mat-error"),o(1,"T\xEDtulo Contato \xE9 "),t(2,"strong"),o(3,"requerido"),e()())}function ee(r,c){r&1&&(t(0,"mat-error"),o(1,"T\xEDtulo Contato deve ter no m\xEDnimo 3 caracteres"),e())}function te(r,c){r&1&&(t(0,"mat-error"),o(1," O CEP deve estar no formato "),t(2,"strong"),o(3,"#####-###"),e(),o(4,". "),e())}function oe(r,c){r&1&&(t(0,"mat-error"),o(1," O Celular deve estar no formato "),t(2,"strong"),o(3,"(##) #####-####"),e(),o(4,". "),e())}var he=(()=>{class r{constructor(n,i,a,f){this.fornecedoresService=n,this.form=i,this.router=a,this.routeActive=f,this.showLoading=!1,this.fornecedorForm=this.form.group({id:[null],razaoSocial:["",[p.required,p.minLength(3)]],tituloContato:["",[p.required,p.minLength(3)]],nomeFantasia:["",[p.required,p.minLength(3)]],endereco:this.form.group({rua:[""],cidade:[""],bairro:[""],cep:[null],pais:[""],telefone:[""]})})}ngOnInit(){this.routeActive!==void 0&&this.routeActive!==null&&this.routeActive.snapshot!==void 0&&this.routeActive.snapshot!==null&&this.routeActive.snapshot.paramMap!==void 0&&this.routeActive.snapshot.paramMap!==null&&this.routeActive.snapshot.paramMap.get("id")!==void 0&&this.routeActive.snapshot.paramMap.get("id")!==null&&this.fornecedoresService.pegar(Number(this.routeActive.snapshot.paramMap.get("id"))).subscribe(n=>{if(n!=null){let i=n;this.fornecedorForm.setValue({id:i.id,razaoSocial:i.razaoSocial,tituloContato:i.tituloContato,nomeFantasia:i.nomeFantasia,endereco:{rua:i.endereco?.rua||null,cidade:i.endereco?.cidade||null,cep:i.endereco?.cep||null,bairro:i.endereco?.bairro||null,pais:i.endereco?.pais||null,telefone:i.endereco?.telefone||null}}),this.fornecedorForm.get("id")?.disable()}})}onSubmit(){console.log("Submit",this.fornecedorForm.value),this.onSave(this.convertFormBuilderGroupToFornecedor())}convertFormBuilderGroupToFornecedor(){this.fornecedorForm.get("id")?.enable();let n=this.fornecedorForm.value;return this.fornecedorForm.get("id")?.disable(),{id:n.id??0,razaoSocial:n.razaoSocial||"",tituloContato:n.tituloContato||"",nomeFantasia:n.nomeFantasia||"",endereco:{rua:n.endereco?.rua||null,cidade:n.endereco?.cidade||null,cep:n.endereco?.cep||null,bairro:n.endereco?.bairro||null,pais:n.endereco?.pais||null,telefone:n.endereco?.telefone||null}}}onSave(n){return F(this,null,function*(){this.showLoading=!0;let i=yield S(this.fornecedoresService.salvar(n));console.log("Fornecedor salvo: ",i),this.showLoading=!1,this.router.navigate(["/fornecedores"])})}cancelar(){this.router.navigate(["/fornecedores"])}static{this.\u0275fac=function(i){return new(i||r)(C(Q),C(z),C(x),C(b))}}static{this.\u0275cmp=g({type:r,selectors:[["app-cad-fornecedor"]],decls:64,vars:14,consts:[["novalidate","",3,"ngSubmit","formGroup"],[4,"ngIf"],[1,"container"],[1,"item"],["matInput","","formControlName","razaoSocial"],["matInput","","formControlName","nomeFantasia"],["matInput","","formControlName","tituloContato"],["formGroupName","endereco",1,"container"],["matInput","","formControlName","rua"],["matInput","","formControlName","cidade"],["matInput","","formControlName","bairro"],["matInput","","formControlName","pais"],["matInput","","formControlName","cep","mask","00000-000",3,"dropSpecialCharacters"],["matInput","","formControlName","telefone","mask","(00) 00000-0000",3,"dropSpecialCharacters"],["mat-raised-button","","color","primary","type","submit",2,"margin-right","8px !important",3,"disabled"],["type","button","mat-raised-button","","color","primary",3,"click"],[3,"visible"],[1,"item-20"],["matInput","","formControlName","id"]],template:function(i,a){if(i&1&&(t(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),o(3,"Fornecedor"),e()(),t(4,"mat-card-content")(5,"form",0),E("ngSubmit",function(){return a.onSubmit()}),t(6,"div"),u(7,U,5,0,"div",1),t(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),o(11,"Raz\xE3o Social"),e(),m(12,"input",4),u(13,W,4,0,"mat-error")(14,X,2,0,"mat-error"),e()(),t(15,"div",2)(16,"mat-form-field",3)(17,"mat-label"),o(18,"Nome Fantasia"),e(),m(19,"input",5),u(20,Y,4,0,"mat-error")(21,Z,2,0,"mat-error"),e(),t(22,"mat-form-field",3)(23,"mat-label"),o(24,"T\xEDtulo Contato"),e(),m(25,"input",6),u(26,$,4,0,"mat-error")(27,ee,2,0,"mat-error"),e()(),t(28,"mat-card-subtitle"),o(29,"Endere\xE7o"),e(),t(30,"div",7)(31,"mat-form-field",3)(32,"mat-label"),o(33,"Logradouro"),e(),m(34,"input",8),e()(),t(35,"div",7)(36,"mat-form-field",3)(37,"mat-label"),o(38,"Cidade"),e(),m(39,"input",9),e(),t(40,"mat-form-field",3)(41,"mat-label"),o(42,"Bairro"),e(),m(43,"input",10),e(),t(44,"mat-form-field",3)(45,"mat-label"),o(46,"Pa\xEDs"),e(),m(47,"input",11),e()(),t(48,"div",7)(49,"mat-form-field",3)(50,"mat-label"),o(51,"CEP"),e(),m(52,"input",12),u(53,te,5,0,"mat-error",1),e(),t(54,"mat-form-field",3)(55,"mat-label"),o(56,"Celular"),e(),m(57,"input",13),u(58,oe,5,0,"mat-error",1),e()()(),t(59,"button",14),o(60," Salvar "),e(),t(61,"button",15),E("click",function(){return a.cancelar()}),o(62," Cancelar "),e()()(),m(63,"app-loading-bar",16),e()),i&2){let f,v,h;l(5),d("formGroup",a.fornecedorForm),l(2),d("ngIf",((f=a.fornecedorForm.get("id"))==null?null:f.value)!==null),l(6),s(a.fornecedorForm.controls.razaoSocial.hasError("required")?13:-1),l(),s(a.fornecedorForm.controls.razaoSocial.hasError("minlength")?14:-1),l(6),s(a.fornecedorForm.controls.nomeFantasia.hasError("required")?20:-1),l(),s(a.fornecedorForm.controls.nomeFantasia.hasError("minlength")?21:-1),l(5),s(a.fornecedorForm.controls.tituloContato.hasError("required")?26:-1),l(),s(a.fornecedorForm.controls.tituloContato.hasError("minlength")?27:-1),l(25),d("dropSpecialCharacters",!1),l(),d("ngIf",((v=a.fornecedorForm.get("endereco.cep"))==null?null:v.hasError("mask"))&&((v=a.fornecedorForm.get("endereco.cep"))==null?null:v.touched)),l(4),d("dropSpecialCharacters",!1),l(),d("ngIf",((h=a.fornecedorForm.get("endereco.telefone"))==null?null:h.hasError("mask"))&&((h=a.fornecedorForm.get("endereco.telefone"))==null?null:h.touched)),l(),d("disabled",!a.fornecedorForm.valid),l(4),d("visible",a.showLoading)}},dependencies:[L,T,N,I,M,y,D,A,J,q,P,O,V,j,k,w,R,B,G,H,_,K],styles:[".mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}"]})}}return r})();export{he as CadFornecedorComponent};
