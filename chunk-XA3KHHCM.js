import{a as te}from"./chunk-Q5O3DEIF.js";import{a as ee}from"./chunk-2EVUWWIG.js";import{d as I,f as Z}from"./chunk-EOV7HJLD.js";import{B as Q,C as $,D as q,J as j,K as M,L as E,M as O,N as b,O as A,P as B,Q as N,R as G,S as J,T as K,U,V as W,W as X,X as T,ja as Y,u as z,w as H,x as P,z as L}from"./chunk-BDPFLN4K.js";import{Ab as f,Jb as n,Kb as a,Lb as s,Mb as p,Nb as u,Pb as S,Sb as w,Ub as D,Yb as g,Zb as F,_b as v,bb as m,cb as h,cc as d,d as y,dc as x,gc as V,na as C,nb as k,oa as _,s as R,sb as c}from"./chunk-VAOQOUOU.js";var ie=()=>[5,10,20];function oe(t,o){t&1&&(n(0,"th",14),d(1,"Id"),a())}function ne(t,o){if(t&1&&(n(0,"td",15),d(1),a()),t&2){let e=o.$implicit;m(),x(e.id)}}function ae(t,o){t&1&&(n(0,"th",14),d(1,"Raz\xE3o Social"),a())}function re(t,o){if(t&1&&(n(0,"td",15),d(1),a()),t&2){let e=o.$implicit;m(),x(e.razaoSocial)}}function le(t,o){t&1&&(n(0,"th",14),d(1,"T\xEDtulo Contato"),a())}function de(t,o){if(t&1&&(n(0,"td",15),d(1),a()),t&2){let e=o.$implicit;m(),x(e.tituloContato)}}function me(t,o){t&1&&s(0,"th",14)}function ce(t,o){if(t&1){let e=S();n(0,"td",15)(1,"button",16),w("click",function(){let i=C(e).$implicit,l=D();return _(l.onClickEditar(i))}),n(2,"mat-icon"),d(3,"edit"),a()()()}}function se(t,o){t&1&&s(0,"th",14)}function pe(t,o){if(t&1){let e=S();n(0,"td",15)(1,"button",17),w("click",function(){let i=C(e).$implicit,l=D();return _(l.onClickDeletar(i))}),n(2,"mat-icon"),d(3,"delete"),a()()()}}function ue(t,o){t&1&&s(0,"tr",18)}function fe(t,o){t&1&&s(0,"tr",19)}var Ie=(()=>{class t{constructor(e,r,i){this.fornecedorService=e,this.produtosService=r,this.router=i,this.dataSource=new T,this.showLoading=!1,this.displayedColumns=["id","razaoSocial","tituloContato","editar","excluir"]}ngAfterViewInit(){this.loadFornecedores()}loadFornecedores(){return y(this,null,function*(){this.showLoading=!0;let e=yield R(this.fornecedorService.getFornecedores());this.dataSource=new T(e),this.table.dataSource=this.dataSource,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.showLoading=!1})}navegarParaCadFornecedor(){this.router.navigate(["/cad-fornecedor"])}onClickEditar(e){console.log("Editando Fornecedor: ",e),e!=null&&e.id!==void 0&&e.id!==null&&this.router.navigate(["/cad-fornecedor-edit",e.id])}onClickDeletar(e){return y(this,null,function*(){console.log("Excluindo Fornecedor: ",e),e!=null&&e.id!==void 0&&e.id!==null&&confirm(`Deletar Fornecedor (${e.id}) ${e.razaoSocial} ?`)&&(this.showLoading=!0,(yield this.produtosService.existsProdutoComFornecedor(e))?(alert("N\xE3o \xE9 poss\xEDvel excluir um fornecedor que possui produtos cadastrados."),this.showLoading=!1):this.fornecedorService.deletar(e.id).subscribe(r=>{this.showLoading=!1,this.loadFornecedores()}))})}static{this.\u0275fac=function(r){return new(r||t)(h(te),h(ee),h(I))}}static{this.\u0275cmp=k({type:t,selectors:[["app-fornecedores"]],viewQuery:function(r,i){if(r&1&&(g(M,5),g(E,5),g(b,5)),r&2){let l;F(l=v())&&(i.paginator=l.first),F(l=v())&&(i.sort=l.first),F(l=v())&&(i.table=l.first)}},decls:29,vars:8,consts:[["Paginator",""],["mat-raised-button","",3,"click"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","razaoSocial"],["matColumnDef","tituloContato"],["matColumnDef","editar"],["matColumnDef","excluir"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Selecione a P\xE1gina",3,"length","pageIndex","pageSize","pageSizeOptions"],[3,"visible"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-button","","matTooltip","Editar",3,"click"],["mat-button","","matTooltip","Excluir",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,i){if(r&1){let l=S();n(0,"mat-card")(1,"mat-card-actions")(2,"button",1),w("click",function(){return C(l),_(i.navegarParaCadFornecedor())}),d(3,"Novo Fornecedor"),a()(),n(4,"mat-card-header")(5,"mat-card-title"),d(6,"Fornecedores"),a()(),n(7,"mat-card-content")(8,"table",2),p(9,3),c(10,oe,2,0,"th",4)(11,ne,2,1,"td",5),u(),p(12,6),c(13,ae,2,0,"th",4)(14,re,2,1,"td",5),u(),p(15,7),c(16,le,2,0,"th",4)(17,de,2,1,"td",5),u(),p(18,8),c(19,me,1,0,"th",4)(20,ce,4,0,"td",5),u(),p(21,9),c(22,se,1,0,"th",4)(23,pe,4,0,"td",5),u(),c(24,ue,1,0,"tr",10)(25,fe,1,0,"tr",11),a(),s(26,"mat-paginator",12,0),a(),s(28,"app-loading-bar",13),a()}r&2&&(m(24),f("matHeaderRowDef",i.displayedColumns),m(),f("matRowDefColumns",i.displayedColumns),m(),f("length",i.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",V(7,ie)),m(2),f("visible",i.showLoading))},dependencies:[Y,b,B,K,N,A,U,G,J,W,X,M,E,O,z,q,H,Q,L,$,P,j,Z],styles:[".mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}"]})}}return t})();export{Ie as FornecedoresComponent};
