import{a as g,oa as o}from"./chunk-E635EJ2W.js";import{$ as m,a as c,b as p,d as u,ea as h,t as d,u as l,z as f}from"./chunk-SVLTXY3Q.js";var I=(()=>{class i{constructor(t){this.http=t}getProdutos(){return this.http.get(o.api+"produtos")}getProdutosComFiltro(t){let s=this.http.get(o.api+"produtos?ativo=true"),n=this.http.get(o.api+"fornecedores");return f({produtos:s,fornecedores:n}).pipe(l(({produtos:a,fornecedores:r})=>a.map(e=>p(c({},e),{fornecedor:r.find(w=>w.id===e.fornecedorId)}))),l(a=>{if(!t||t.trim()==="")return a;let r=t.toLowerCase();return a.filter(e=>e.id?.toString().includes(r)||e.descricao?.toLowerCase().includes(r)||e.categoria?.id?.toString().toLowerCase().includes(r)||e.categoria?.nome?.toLowerCase().includes(r)||e.categoria?.descricao?.toLowerCase().includes(r)||e.fornecedor?.id?.toString().toLowerCase().includes(r)||e.fornecedor?.razaoSocial?.toLowerCase().includes(r)||e.fornecedor?.nomeFantasia?.toLowerCase().includes(r))}))}salvar(t){return t.id!==null&&t.id!==0?this.http.put(o.api+"produtos/"+t.id,t):this.http.post(o.api+"produtos",t)}existsProdutoComCategoria(t){return u(this,null,function*(){return t!==null&&t.id!==null?(yield d(this.getProdutos())).some(n=>n.categoria?.id===t.id):!1})}existsProdutoComFornecedor(t){return u(this,null,function*(){return t!==null&&t.id!==null?(yield d(this.getProdutos())).some(n=>n.fornecedorId===t.id):!1})}pegar(t){return this.http.get(o.api+"produtos/"+t)}deletar(t){return this.http.delete(o.api+"produtos/"+t)}static{this.\u0275fac=function(s){return new(s||i)(h(g))}}static{this.\u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{I as a};
