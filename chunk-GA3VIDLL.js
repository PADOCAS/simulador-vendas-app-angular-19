import{a as P}from"./chunk-ZUOCVNNK.js";import{a as R}from"./chunk-4Y7K6X2Y.js";import{b as _,d as E}from"./chunk-NA3E3UYI.js";import{A,B as x,C as T,E as D,G as L,I as q,J as w,P as G,Q as B,S as V,V as j,X as k,ja as O,t as F,v as M,w as y,x as I,y as N,z as g}from"./chunk-GNPPUD43.js";import{Ab as c,Fb as p,Ic as S,Jb as e,Kb as t,Lb as s,Sb as v,bb as m,cb as d,cc as r,d as h,nb as b,s as C,sb as u}from"./chunk-VAOQOUOU.js";function H(a,f){a&1&&(e(0,"div")(1,"mat-form-field",10)(2,"mat-label"),r(3,"Id"),t(),s(4,"input",11),t()())}function z(a,f){a&1&&(e(0,"mat-error"),r(1,"Nome \xE9 "),e(2,"strong"),r(3,"requerido"),t()())}function J(a,f){a&1&&(e(0,"mat-error"),r(1,"Nome deve ter no m\xEDnimo 3 caracteres"),t())}function K(a,f){a&1&&(e(0,"mat-error"),r(1,"Descri\xE7\xE3o \xE9 "),e(2,"strong"),r(3,"requerida"),t()())}var ne=(()=>{class a{constructor(i,o,n,l){this.categoriaService=i,this.form=o,this.router=n,this.routeActive=l,this.showLoading=!1,this.categoriaForm=this.form.group({id:[null],nome:["",[g.required,g.minLength(3)]],descricao:["",[g.required]]})}ngOnInit(){this.routeActive!==void 0&&this.routeActive!==null&&this.routeActive.snapshot!==void 0&&this.routeActive.snapshot!==null&&this.routeActive.snapshot.paramMap!==void 0&&this.routeActive.snapshot.paramMap!==null&&this.routeActive.snapshot.paramMap.get("id")!==void 0&&this.routeActive.snapshot.paramMap.get("id")!==null&&this.categoriaService.pegar(Number(this.routeActive.snapshot.paramMap.get("id"))).subscribe(i=>{if(i!=null){let o=i;this.categoriaForm.setValue({id:o.id,nome:o.nome,descricao:o.descricao}),this.categoriaForm.get("id")?.disable()}})}onSubmit(){console.log("Submit",this.categoriaForm.value),this.onSave(this.convertFormBuilderGroupToCategoria())}convertFormBuilderGroupToCategoria(){this.categoriaForm.get("id")?.enable();let i=this.categoriaForm.value;return this.categoriaForm.get("id")?.disable(),{id:i.id??0,nome:i.nome||"",descricao:i.descricao||""}}onSave(i){return h(this,null,function*(){this.showLoading=!0;let o=yield C(this.categoriaService.salvar(i));console.log("Categoria salva: ",o),this.showLoading=!1,this.router.navigate(["/categorias"])})}cancelar(){this.router.navigate(["/categorias"])}static{this.\u0275fac=function(o){return new(o||a)(d(P),d(q),d(E),d(_))}}static{this.\u0275cmp=b({type:a,selectors:[["app-cad-categoria"]],decls:25,vars:7,consts:[["novalidate","",3,"ngSubmit","formGroup"],[4,"ngIf"],[1,"container"],[1,"item-30"],["matInput","","formControlName","nome"],[1,"item-70"],["matInput","","formControlName","descricao"],["mat-raised-button","","color","primary","type","submit",2,"margin-right","8px !important",3,"disabled"],["type","button","mat-raised-button","","color","primary",3,"click"],[3,"visible"],[1,"item-20"],["matInput","","formControlName","id"]],template:function(o,n){if(o&1&&(e(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3,"Categoria"),t()(),e(4,"mat-card-content")(5,"form",0),v("ngSubmit",function(){return n.onSubmit()}),e(6,"div"),u(7,H,5,0,"div",1),e(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),r(11,"Nome"),t(),s(12,"input",4),u(13,z,4,0,"mat-error")(14,J,2,0,"mat-error"),t(),e(15,"mat-form-field",5)(16,"mat-label"),r(17,"Descri\xE7\xE3o"),t(),s(18,"input",6),u(19,K,4,0,"mat-error"),t()()(),e(20,"button",7),r(21," Salvar "),t(),e(22,"button",8),v("click",function(){return n.cancelar()}),r(23," Cancelar "),t()()(),s(24,"app-loading-bar",9),t()),o&2){let l;m(5),c("formGroup",n.categoriaForm),m(2),c("ngIf",((l=n.categoriaForm.get("id"))==null?null:l.value)!==null),m(6),p(n.categoriaForm.controls.nome.hasError("required")?13:-1),m(),p(n.categoriaForm.controls.nome.hasError("minlength")?14:-1),m(5),p(n.categoriaForm.controls.descricao.hasError("required")?19:-1),m(),c("disabled",!n.categoriaForm.valid),m(4),c("visible",n.showLoading)}},dependencies:[w,T,N,A,x,D,L,O,F,k,I,M,y,G,V,j,B,S,R],styles:[".mat-mdc-card-title[_ngcontent-%COMP%]{margin-bottom:10px!important}.mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}"]})}}return a})();export{ne as CadCategoriaComponent};
